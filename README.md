# Проект Novels

1. **Название проекта** : Многоязычная платформа для чтения манги (аналог **Remanga**)

2. **Краткая концепция** : Кроссплатформенный веб-сервис для чтения манги с поддержкой 7 языков, построенный на основе готового дизайна

## Ключевые характеристики:

- Многоязычность: Поддержка 7 языков интерфейса с возможностью расширения
- Готовый дизайн: Использование CSS-стилей с существующего сайта (адаптация)
- Сроки: Рабочая версия до середины февраля 2024
- Архитектура: Поэтапное развитие — сначала база, затем улучшения

# Функционал 

## Список функционала.

1. ТОПЫ. Которые позволят легко находить интересные книги (по билетам, по просмотрам, новинки, тренды, последние обновления)

2. Ежемесячная подписка (голоса за выбор книги на перевод, билеты для голосования за книги, предложения книг на перевод, разрешение на редактирования описания книги, разрешение на повторный перевод определенных глав, отключение рекламы, перевод глав за билеты).

3. Уровни (голоса, билеты)

4. Голосование за новеллы.  Любой пользователь, у которого есть “билеты голосования” могут выбрать любую книгу из предложенного другими юзерами пула - первая книга в списке голосования, раз в несколько часов, будет отправлена на перевод.

5. Предложения на перевод новелл. Юзеры, у которых есть доступ к предложке тайтлов (по подписке или за уровни), могут потратить Билет Тайтла (Novel Ticket или Novel Request) и, оставив ссылку на оригинал, заполнив описание, теги, жанры и прочее, отправить книгу на голосование. Также за билеты голосования (Vote Ticket или Daily Vote) этот пользователь может вывести книгу на первое место, а за Translation Ticket может перевести главы.

6. Translation Ticket. Платным подпискам раз в определенный период времени выдают Translation Ticket, которые можно потратить на перевод глав, например, на перевод глав в произведении, которое только в предложке на перевод, его можно перевести заранее, чтобы оно быстрее набрало голоса.

7. Novel Request. Платные подписчики и те, у кого высокий уровень, могут получать квоты на перевод новелл, которые будут использоваться в предложке тайтлов.
8. Daily Vote. Каждому юзеру на сайте раз в день (в 3:00 по МСК и в 0:00 по UTC) будут выдаваться ежедневные билеты, которые можно будет потратить на голосование за новеллу.
9. Профиль пользователя. На странице профиля должны быть: предложенные новеллы, настройки, уровень пользователя и опыт до следующего, уровень платной подписки пользователя, количество прочитанных глав, время чтения, закладки, и комментарии в конце страницы, достижения, бейджики (то, что будет выводиться).
10. Закладки. На странице книги должно быть несколько списков, а сортировка должна быть по последним вышедшим главам.
11. Статистика. На странице статистики должно отображаться количество (прочитанных глав, добавленных книг в закладки, уровень пользователя, время чтения, предложено новелл, потрачено тикетов на перевод и голосования, количество комментариев) юзера, а потом сколько всего переведено глав на сайте, сколько всего всеми юзерами добавлено новелл на сайте, сколько всего оставлено комментариев на сайте и тд.
12. Коллекции. На главной странице сайта должны отображаться коллекции, созданные пользователя, за каждую коллекцию можно голосовать, выводя её в топ. Коллекции должны состоять из книг и описания этих книг юзером.
13. Новости платформы. Как форум на tl.rulate.ru или remanga.org, должна быть вкладка с новостями платформы, также последние 3-4 новости должны отображаться на главной странице. Эти новости могут оставлять только модераторы и администраторы (или только администраторы).
14. Редактирование описания новелл. Платные подписчики сайта могут редактировать описание книги, нажимая на кнопку редактирования они будут переноситься на страницу заполнения книги, где смогут изменить описание, обложку, теги, жанры, автора, альтернативное название, количество глав в оригинале, год выпуска, а затем нажать кнопку “отправить на модерацию”.
15. Топ потраченных билетов. В топе должны быть показаны юзеры, которые за 1 день, за 7 дней, за 30 дней, потратили больше всего билетов на перевод или на голосование за новеллы.
16. Достижения. За выполнение определенных действий на сайте (прочитать n-глав, оставить n-комментариев и тд).
17. Страница книги. На странице книги должны быть обложка, описание (теги, жанры, китайское название, автор, дата выхода книги, статус перевода (завершен, продолжается, брошен, перерыв), количество глав в оригинале, оценка книги, отзывы от юзеров, раздел комментариев, оглавление).
18. Комментарии. Комментарии должны копировать reddit, но в большей степени ranobehub.org. Комментарии должны находиться на странице книги, на странице пользователя, на странице главы (также должны быть абзацные комментарии, как на webnovel.com или qidian.com).
19. Поиск книг. По ключевым словам.
20. Каталог. На странице каталога должен быть выбор по жанрам, по статусу (продолжается, завершен, перерыв), по количеству просмотров, по количеству закладок, по количеству отзывов, по дате добавления на сайте, по дате обновления.


## Функционал и страницы

### Главная страница

1. Слайдер новостей: Последние 3-4 новости (заголовок, превью).
2. ТОПЫ (виджеты):
- Популярное (по просмотрам за 24ч/неделю).
- Слайдер рекомендаций (блок в верхней части страницы)
- Новинки.
- Тренды (быстрый рост рейтинга).
- Последние обновления (вышедшие главы).
- Топ по билетам (Лидеры голосования).
3. Коллекции пользователей: Слайдер или сетка популярных подборок. 

### Каталог и Поиск
1. Поиск: Полнотекстовый поиск по названию, автору, ключевым словам.
2. Фильтры:
- Жанры (мультивыбор).
- Статус перевода (Завершен, Продолжается, Брошен, Перерыв).
- Сортировка: Просмотры, Закладки, Отзывы, Дата добавления, Дата обновления.

### Страница Книги (Тайтла)
1. Элементы:
- Обложка, Названия (RU, EN, Оригинал).
- Метаданные: Автор, Год, Теги, Жанры, Статус, Кол-во глав в оригинале.
- Рейтинг: Звезды (1-5) + средний балл.
- Оглавление: Список глав с пометкой (прочитано/новое/платное).
- Статистика книги: Кол-во просмотров, добавлений в закладки.
- Вкладки: Описание | Рецензии | Комментарии.

### Ридер (Страница чтения главы)
1. Текст главы.
2. Навигация (Предыдущая/Следующая/Оглавление).
3. Абзацные комментарии: Возможность выделить абзац и оставить к нему комментарий (как на Webnovel/Qidian). Отображение счетчика комментов сбоку от абзаца.
Общие комментарии внизу страницы.

### Система Голосования и Переводов (Core Feature)
1. Предложка (Novel Proposal):
- Форма для юзеров с Novel Request: Ссылка на оригинал, заполнение метаданных.
- Книга попадает в статус «Голосование».
2. Пул Голосования:
- Список книг, предложенных пользователями.
- Юзеры тратят Daily Vote или Translation Ticket для поднятия книги в топе.
3. Автоматический выбор:
- Таймер (CRON): Раз в X часов система берет книгу с макс. голосами.
- Действие: Отправка уведомления переводчикам или автоматическая смена статуса на «В переводе».

### Профиль пользователя
1. Шапка: Аватар, Уровень + XP бар, Статус подписки.
2. Статистика (Личная): Время чтения, Прочитано глав, Комментарии, Потрачено тикетов, Предложено новелл.
3. Закладки:
- Списки: Читаю, В планах, Брошено и т.д.
- Сортировка: По новизне глав.
4. Предложения: Список новелл, которые предложил юзер, и их статус.
5. Коллекции: Создание и управление подборками книг.
6. Достижения: Галерея полученных бейджей.

### Глобальная статистика (Отдельная страница)
1. Топ пользователей (Rich List): Кто потратил больше всего билетов за 1/7/30 дней.
2. Общие цифры платформы: Всего глав переведено, всего новелл, всего комментариев.

### Редактирование (Wiki-система)
1. Доступ: Только для подписчиков.
2. Функционал: Кнопка «Редактировать» на странице книги -> Форма изменения полей.
3. Логика: Изменения не применяются сразу, а создают тикет «На модерацию».

### Новости (Форум)
1. Разделы новостей.
2. Права на постинг: Только Админы/Модераторы.
3. Комментарии под новостями доступны всем.

## Экономика и Геймификация:

### Валюты и Тикеты
Система должна поддерживать несколько типов сущностей для взаимодействия:

1. Daily Vote (Ежедневный билет):
- Начисление: Автоматически всем пользователям 1 раз в сутки (сброс в 3:00 МСК / 0:00 UTC). Не накапливаются (сгорают, если не использованы — уточнить).
- Назначение: Голосование за новеллу из пула «На перевод».
2. Novel Request (Билет Тайтла):
- Начисление: Платным подписчикам и за достижение высоких уровней.
- Назначение: Создание заявки на добавление новой книги в пул голосования.
3. Translation Ticket (Билет Перевода):
- Начисление: Периодически платным подписчикам.
- Назначение: Мгновенный заказ перевода глав (даже если книга еще не выиграла в общем голосовании) или перевод глав вне очереди.

### Уровни и Опыт (XP)
1. Механика: Начисление XP за действия (чтение глав, комментарии, посещение сайта).
2. Отображение: Прогресс-бар в профиле, цифровое значение уровня.
3. Бонусы: При повышении уровня открываются слоты для предложений (Novel Request) или увеличивается лимит закладок (опционально).
4. Достижения (Ачивки)

**Система триггеров**:
- Прочитано N глав.
- Оставлено N комментариев.
- Потрачено N билетов.

**Награда**: 
- Бейджик в профиле и рядом с ником в комментариях.

## Комментарии
1. Структура: Древовидная (Nested), как на Reddit или, если брать сайты с веб-новеллами, ranobehub.org. Ответы на ответы со смещением.
2. Где комментарии находятся: Под книгой, под главой, внутри абзаца, в профиле, в новостях.
3. Функции: Лайк/Дизлайк, Жалоба, Редактирование (своих), Спойлер-тег.

## Подписка
Ежемесячная подписка дает:
1. Отключение рекламы.
2. Ежемесячный пакет Translation Ticket и Novel Request.
3. Увеличенный множитель Daily Vote (например, голос считается за 2).
4. Доступ к кнопке «Редактировать описание».
5. Доступ к функции «Повторный перевод глав» (запрос на ре-транслейт).

## Роли пользователей:
1. Гость: Просмотр каталога, чтение бесплатных глав.
2. Пользователь (User): Регистрация, чтение, комментирование, базовые голосования, накопление опыта.
3. Подписчик (Premium): Платная подписка. Расширенные права (редактирование, доп. билеты, отключение рекламы).
4. Модератор: Одобрение правок описания, модерация комментариев и новостей.
5. Администратор: Полный доступ, управление новостями, биллингом и пользователями.

## Техническая часть
- Время: Серверное время UTC, но отображение и сброс дейликов привязаны к 3:00 МСК (реализовать через оффсеты).
- Адаптивность: Полная поддержка мобильных устройств (Mobile First).
- SEO: ЧПУ (человекопонятные URL) для страниц книг и глав. Генерация Sitemap.
- Безопасность: Защита от накрутки голосов (fingerprint, captcha при подозрительной активности).


# Дизайн

## Общая концепция дизайна (Design System)
1. Референс стиля: Remanga.org.
2. Цветовая схема: Преимущественно Dark Mode (темная тема) как основная. Глубокий темно-серый фон (#121212 или близкие оттенки), контрастный белый текст, акцентные цвета (фиолетовый/оранжевый/зеленый) для кнопок и активных элементов.
3. Формы: Скругленные углы (Border-radius: 8px - 12px) для карточек, кнопок и аватаров.
4. Тени: Мягкие тени (Drop-shadow) для выделения карточек на темном фоне.
5. Типографика: Sans-serif шрифты (Inter, Roboto или Manrope), удобные для длительного чтения.

## Главная страница

1. Шапка (Header):
- Логотип слева.
- Поле поиска по центру.
- Кнопки справа: "Мои закладки", "Уведомления", "Профиль/Аватар", "Кошелек/Билеты" (важно вывести баланс билетов в хедер)

2. Слайдер (Hero Section): Широкий слайдер (3:2) в половину страницы, как на wuxiaworld, в правой части будут новинки.

3. Секция "Последние обновления":
- Сетка или список.
- Отображение: Обложка, Название, Номер новой главы, Время выхода (напр. "5 мин. назад").
- Расположение сразу под блоками с голосованием и предложением (или сразу после слайдера).

4. Два блока (3:2) голосовать за новеллу и предложить новеллу

5. Виджеты (Сетки):
- Горизонтальные скролл-бары для разделов: "Горячие новинки", "Популярное за неделю".
- Карточка новеллы: Обложка (вертикальная), Название (обрезается по длине), (звездочка + рейтинг).
- Расположение под голосованием и предложкой или после секции “последние обновления”

## Ридер (страница чтения новеллы) - Взять с ranobehub

## Профиль пользователя - Скопировать с реманги

## Закладки (Мои книги)
Референс: Remanga.org.

1. Фильтрация (Табы сверху): "Читаю", "В планах", "Брошено", "Прочитано", "Любимые".
2. Сортировка: Выпадающий список (По дате обновления, По дате добавления).
3. Вид списка:
- Список с крупными карточками.
- Слева обложка, по центру название и статус, справа — прогресс (например, "Глава 50 из 100”, а также шкала прогресса) и кнопка "Продолжить" (ведет к последней непрочитанной главе).
- Индикатор: Если вышла новая глава, на карточке должен быть яркий бейдж "NEW".

## Страница Книги (Тайтла)
Гибрид: Структура данных от Wuxiaworld, но визуальная обертка Remanga.

1. Шапка книги (Remanga Style):
- Фон: Размытая увеличенная обложка.
- Контент: Постер (Сверху), На постере статус книги “Завершен, продолжается, брошен”, Информация (Под постером).
- Информация: Название (Крупно), Альтернативные названия, Автор, Художник, Год, Статус перевода.
- Кнопки действий (Важно!): Крупные цветные кнопки "ЧИТАТЬ", "ДОБАВИТЬ В ЗАКЛАДКИ".
- Блок экономики (Интеграция Wuxiaworld функций в стиль Remanga): Ряд кнопок под основными действиями: "Голосовать (Daily Vote)", "Редактировать описание (для Premium)".

2. Тело страницы (Wuxiaworld Logic):
Табы: Описание | Оглавление | Комментарии.
Таб "Описание":
- Текст синопсиса.
- Блок “Автор, оригинальное название, год выхода, количество глав в оригинале
- Теги (цветные "пилюли").
- Фандом (если есть)
Таб "Оглавление":
- Список глав.
Таб "Комментарии":
- Как на ranobehub.org

## Специфические элементы (Геймификация)
1. Топ пользователей (Leaderboard):
2. Таблица в стиле Remanga. Аватар, Ник, Уровень, Количество потраченных билетов (выделено жирным/цветом).
3. Всплывающие уведомления (Toasts):
- Стиль: Темные плашки с иконкой и текстом (например: "Вы получили 1 Daily Vote", "Глава успешно куплена").
- Расположение: Внизу справа или сверху по центру.

##  Структура Главной
Без стиля реманги и тд, названия блоков могут иметь другие названия, так как делалось через промт для нейронки:
См. скриншот **task_images/Home.png**

# Этапы разработки:

1. MVP 1: Каталог, Ридер, Профиль, Базовая админка (заливка книг).
2. MVP 2: Система комментариев (обычных), Закладки, Уровни.
3. Economy Update: Внедрение билетов, голосования, подписок, абзацных комментариев.
4. Community Update: Коллекции, Вики-редактирование, Форум/Новости.

# Технолочиеский стек:

1. Бэкенд - Golang (Chi)
2. СУБД - PostgreSQL
3. Фронтенд - React
